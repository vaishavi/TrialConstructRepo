const hardButtonsModule=(()=>{"use strict";let e=null;let t="",n="",o="";function a(a,i,l){n=navigationModule.selectedPage();let r="",s="";for(let e=0;e<a.project.signals.length;e++){const t=a.project.signals[e];t.hardButtonSignal===i&&(""!==t.navigationPageName&&(s=t.navigationPageName),""!==t.digitalJoin&&(r=t.digitalJoin))}for(let e=0;e<a.project.pages.length;e++){const t=a.project.pages[e];if(t.pageName===o)for(let e=0;e<t.signals.length;e++){const n=t.signals[e];n.hardButtonSignal===i&&(""!==n.navigationPageName&&(s=n.navigationPageName),""!==n.digitalJoin&&(r=n.digitalJoin))}}for(let e=0;e<a.project.devices.length;e++){const n=a.project.devices[e];if(n.deviceName===t){for(let e=0;e<n.signals.length;e++){const t=n.signals[e];t.hardButtonSignal===i&&(""!==t.navigationPageName&&(s=t.navigationPageName),""!==t.digitalJoin&&(r=t.digitalJoin))}for(let e=0;e<n.pages.length;e++){const t=n.pages[e];if(t.pageName===o)for(let e=0;e<t.signals.length;e++){const n=t.signals[e];n.hardButtonSignal===i&&(""!==n.navigationPageName&&(s=n.navigationPageName),""!==n.digitalJoin&&(r=n.digitalJoin))}}}}if(utilsModule.log("signalValue: ",r),utilsModule.log("navigationPageName: ",s),""!==s&&!0===l&&(utilsModule.log("currentPage.toLowerCase().trim(): ",n.toLowerCase().trim()),utilsModule.log("navigationPageName.toLowerCase().trim(): ",s.toLowerCase().trim()),n.toLowerCase().trim()!==s.toLowerCase().trim()&&templatePageModule.navigateTriggerViewByPageName(s)),""!=r)if(!0===l){CrComLib.publishEvent("b",r,l),null!==e&&window.clearInterval(e);let t=0;e=window.setInterval((()=>{utilsModule.log("Prioritized signal name: ",r," for response ",l),CrComLib.publishEvent("b",r,l),++t>=150&&(console.warn("Hard Button MAXIMUM Repeat digitals sent"),window.clearInterval(e),CrComLib.publishEvent("b",r,!l),null!==e&&window.clearInterval(e))}),200)}else null!==e&&window.clearInterval(e),CrComLib.publishEvent("b",r,l)}return{initialize:function(e){return t=e,new Promise(((e,t)=>{serviceModule.loadJSON("./assets/data/hard-buttons.json",(t=>{const n=JSON.parse(t),i=function(e){const t=[];for(let n=0;n<e.project.signals.length;n++){const o=e.project.signals[n];t.find((e=>e.signalName===o.hardButtonSignal))||t.push({signalName:o.hardButtonSignal,isReady:!1})}for(let n=0;n<e.project.pages.length;n++){const o=e.project.pages[n];for(let e=0;e<o.signals.length;e++){const n=o.signals[e];t.find((e=>e.signalName===n.hardButtonSignal))||t.push({signalName:n.hardButtonSignal,isReady:!1})}}for(let n=0;n<e.project.devices.length;n++){const o=e.project.devices[n];for(let e=0;e<o.signals.length;e++){const n=o.signals[e];t.find((e=>e.signalName===n.hardButtonSignal))||t.push({signalName:n.hardButtonSignal,isReady:!1})}for(let e=0;e<o.pages.length;e++){const n=o.pages[e];for(let e=0;e<n.signals.length;e++){const o=n.signals[e];t.find((e=>e.signalName===o.hardButtonSignal))||t.push({signalName:o.hardButtonSignal,isReady:!1})}}}return t}(n);utilsModule.log("signalNames",i);for(let e=0;e<i.length;e++){const t=i[e];CrComLib.subscribeState("b",t.signalName,(e=>{utilsModule.log("CrComLib.subscribeState: ",t.signalName,e,o),""===o&&!0!==e||(!0===e&&(o=navigationModule.selectedPage()),a(n,t.signalName,e))}))}e(!0)}),(e=>{console.error("Error in Hard Buttons",e),t(!1)}))}))}}})(),navigationModule=(()=>{"use strict";let e="";function t(e){projectConfigModule.projectConfigData().then((t=>{const n=document.getElementById(e+"-import-page");if(!n)return;templateVersionInfoModule.tableCount[e]=CrComLib.countNumberOfCh5Components(n),templateVersionInfoModule.tableCount[e].domNodes=n.getElementsByTagName("*").length;let o=0,a=0,i=0;const l=projectConfigModule.getNavigationPages();l.forEach((e=>o+=templateVersionInfoModule.tableCount[`${e.pageName}`]?.domNodes||0)),l.forEach((e=>a+=templateVersionInfoModule.tableCount[`${e.pageName}`]?.total||0)),l.forEach((e=>{const t=document.getElementById(e.pageName+"-import-page");t&&(i+=CrComLib.countNumberOfCh5Components(t)?.total||0)})),templateVersionInfoModule.componentCount.totalDomCount=o,templateVersionInfoModule.componentCount.totalComponentsCount=a,templateVersionInfoModule.componentCount.currentCh5Components=i}))}return{goToPage:function(n){const o=projectConfigModule.getAllPages().find((e=>e.pageName===n));templateAppLoaderModule.showLoading(o);const a=o.pageName+"-import-page",i=projectConfigModule.getNavigationPages();for(let e=0;e<i.length;e++)a!==i[e].pageName+"-import-page"&&CrComLib.publishEvent("b",i[e].pageName+"-import-page-show",!1);setTimeout((()=>{if(!templateAppLoaderModule.isCachePageLoaded(a)){if(document.getElementById(a)){const e=o.fullPath+o.fileName;document.getElementById(a).setAttribute("url",e)}CrComLib.publishEvent("b",a+"-show",!0)}templatePageModule.hideLoading(o),e=n;let i=CrComLib.subscribeState("o","ch5-import-htmlsnippet:"+o.pageName+"-import-page",(e=>{if(e.loaded){const e=o.preloadPage?0:CrComLib.isCrestronTouchscreen()?300:50;setTimeout((()=>t(o.pageName)),e),setTimeout((()=>{CrComLib.unsubscribeState("o","ch5-import-htmlsnippet:"+o.pageName+"-import-page",i),i=""}))}}))}),50)},selectedPage:function(){return e},updateDiagnosticsOnPageChange:t}})(),projectConfigModule=(()=>{"use strict";let e=null;function t(e){if(e&&""!==e){const t=projectConfigModule.getNonNavigationPages().find((t=>t.pageName===e));return t.fullPath+t.fileName}return""}return{getAllPages:function(){return e.content.pages},projectConfigData:async function(){return null!==e?e:await new Promise(((t,n)=>{serviceModule.loadJSON("./assets/data/project-config.json",(n=>{e=JSON.parse(n),t(e)}),(e=>{n(e)}))}))},getNavigationPages:function(){return e.content.pages.filter((e=>void 0!==e.navigation)).sort(utilsModule.dynamicSort("asc","navigation","sequence"))},getNonNavigationPages:function(){return e.content.pages.filter((e=>void 0===e.navigation))},getAllStandAloneViewPages:function(){return e.content.pages.filter((e=>!utilsModule.isValidObject(e.navigation)&&!0===e.standAloneView))},defaultActiveViewIndex:function(){let t=0;if("undefined"===e.content.$defaultView&&""===e.content.$defaultView.trim())return t;let n=projectConfigModule.getNavigationPages();for(let o=0;o<n.length;o++)if(n[o].pageName.trim().toLowerCase()===e.content.$defaultView.trim().toLowerCase()){t=o;break}return t},getCustomHeaderUrl:function(){return t(e.header.$component)},getCustomFooterUrl:function(){return t(e.footer.$component)},getMenuOrientation:function(){return e.menuOrientation}}})(),serviceModule=(()=>{"use strict";let e,t=CrComLib.Ch5Emulator.getInstance(),n=!1,o=[];function a(e){(function(e){return new Promise((function(t,n){let o=new XMLHttpRequest;o.open("GET",e),o.responseType="json",o.onload=function(){200===o.status||null!==o.response?t(o.response):n(new Error("Json didn't load successfully; error code:"+o.statusText))},o.onerror=function(){n(new Error("There was a network error."))},o.send()}))})(e).then((e=>{null!==e&&(t.loadScenario(e),t.run())}),(t=>{console.error("Could not load url as json file:"+e,t)}))}function i(){if(!(CrComLib.isCrestronTouchscreen()||"undefined"!=typeof WebXPanel&&WebXPanel.isActive&&e)){for(let e=0;e<o.length;e++)a(o[e]);o=[]}}return{initialize:function(t){n=!0,e=t.useWebXPanel,i()},loadJSON:function(e,t){let n=new XMLHttpRequest;n.overrideMimeType("application/json"),n.open("GET",e,!0),n.onreadystatechange=function(){4===n.readyState&&t(n.responseText)},n.send(null)},initEmulator:function(e){CrComLib.Ch5Emulator.clear(),t=CrComLib.Ch5Emulator.getInstance(),t.loadScenario(e),t.run()},addEmulatorScenario:a,addEmulatorScenarioNoControlSystem:function(e){o.push(e),n&&setTimeout(i)}}})(),translateModule=(()=>{"use strict";let e,t=[],n=CrComLib.translationFactory.translator,o=document.getElementById("currentLng"),a="en",i="en";function l(e){if(t[e])s(e);else{let n={};r("./app/template/assets/data/translation/",e).then((o=>{n=utilsModule.mergeJSON(n,o),r("./app/project/assets/data/translation/",e).then((o=>{n=utilsModule.mergeJSON(n,o),t[e]={translation:n},s(e)}))})).catch((o=>{r("./app/project/assets/data/translation/",e).then((o=>{n=utilsModule.mergeJSON(n,o),t[e]={translation:n},s(e)}))}))}}function r(e,t){return new Promise(((n,o)=>{serviceModule.loadJSON(e+t+".json",(e=>{e?n(JSON.parse(e)):o("FILE NOT FOUND")}),(e=>{o("FILE NOT FOUND")}))}))}function s(e){n.changeLanguage(e),i=e}return CrComLib.registerTranslationInterface(n,"-+","+-"),n.init({fallbackLng:"en",language:o,debug:!0,resources:t}),{initializeDefaultLanguage:function(){return new Promise(((e,n)=>{if(t[a])s(a),e();else{let n={};r("./app/template/assets/data/translation/",a).then((o=>{n=utilsModule.mergeJSON(n,o),r("./app/project/assets/data/translation/",a).then((o=>{n=utilsModule.mergeJSON(n,o),t[a]={translation:n},s(a),e()}))})).catch((o=>{r("./app/project/assets/data/translation/",a).then((o=>{n=utilsModule.mergeJSON(n,o),t[a]={translation:n},s(a),e()}))}))}}))},getLanguage:l,changeLang:function(t){clearTimeout(e),e=setTimeout((()=>{t!==a&&(a=t,l(t))}),500)},currentLng:o,defaultLng:a,getTranslator:function(){return n},translateInstant:function(e,t){try{return n.t(e,t)}catch(t){return e[0]}}}})(),utilsModule=(()=>{"use strict";function e(...e){let n={};for(let o=0;o<e.length;o++)n=t(n,e[o]);return n}function t(t,n){for(let o in n)n.hasOwnProperty(o)&&("[object Object]"===Object.prototype.toString.call(n[o])?t[o]=e(t[o],n[o]):t[o]=n[o]);return t}function n(e){return"number"==typeof e||("string"==typeof e?!(!e||""===e.trim()):"boolean"==typeof e||"object"==typeof e&&!!e)}return{log:function(...e){},dynamicSort:function(e,...t){let n=1;return"desc"===e&&(n=-1),function(e,o){if(t.length>1){let a=e[t[0]],i=o[t[0]];for(let e=1;e<t.length;e++)a=a[t[e]],i=i[t[e]];return a<i?-1*n:a>i?1*n:0*n}return e[t]<o[t]?-1*n:e[t]>o[t]?1*n:0*n}},isValidObject:function(e){return!(!e||0===Object.keys(e).length||!n(e))},isValidInput:n,mergeJSON:e,replacePlaceHolders:function(e,t){if(e="function"==typeof e?e():e,-1===["string","number"].indexOf(typeof e))throw"Please provide a valid template";return t?e=e.replace(/\{\{([^}]+)\}\}/g,(function(e){e=e.slice(2,-2);return function(e,t,n){t=function(e){if("string"!=typeof e)return e;{const t=[];return e.split(".").forEach((function(e){e.split(/\[([^}]+)\]/g).forEach((function(e){e.length>0&&t.push(e)}))})),t}}(t);let o=e;for(let e=0;e<t.length;e++){if(!o[t[e]])return;o=o[t[e]]}return o}(t,e.trim())||"{{"+e+"}}"})):e}}})();var webXPanelModule=function(){"use strict";const e={host:window.location.hostname,port:49200,roomId:"",ipId:"0x03",tokenSource:"",tokenUrl:"",authToken:""},t={success:"success",error:"error",warning:"warning",hide:"hide",loading:"loading"};var n=e,o=e,a=e;function i(e=t.hide){let n=document.getElementById("pageStatusIdentifier");n&&(n.className=e)}function l(){const e=window.location.href,t=new URL(e),n=new URLSearchParams(t.search),o={};for(const[e,t]of n)o[e.toLowerCase()]=t;return o}function r(e){let t=translateModule.translateInstant("app.webxpanel.statusmessageprefix"),n=translateModule.translateInstant(e);if(n){let e=t+n;const o=document.querySelector("#webxpanel-tab-content .connection .status");null!==o&&(o.innerHTML=e)}}function s(){let e=document.getElementById("infobtn");e&&e.classList.add("warn")}function c(c){a=e,document.querySelector("#webxpanel-tab-content .connection .status"),i(t.loading),setTimeout((()=>{i(t.hide)}),3e4),function(t){t.config&&t.config.controlSystem&&(n.host=t.config.controlSystem.host||e.host,n.port=t.config.controlSystem.port||e.port,n.roomId=t.config.controlSystem.roomId||e.roomId,n.ipId=t.config.controlSystem.ipId||e.ipId,n.tokenSource=t.config.controlSystem.tokenSource||e.tokenSource,n.tokenUrl=t.config.controlSystem.tokenUrl||e.tokenUrl)}(c),function(){const e=l();o.host=e.host||n.host,o.port=e.port||n.port,o.roomId=e.roomid||n.roomId,o.ipId=e.ipid||n.ipId,o.tokenSource=e.tokensource||n.tokenSource,o.tokenUrl=e.tokenurl||n.tokenUrl,o.authToken=e.authtoken}(),a=o,WebXPanel.default.initialize(a),r("app.webxpanel.status.CONNECT_WS");const u=document.querySelector("#webxpanel-tab-content .connection .cs"),d=document.querySelector("#webxpanel-tab-content .connection .ipid"),m=document.querySelector("#webxpanel-tab-content .connection .roomid");""!==a.host&&(u.textContent=`CS: wss://${a.host}:${a.port}`),""!==a.ipId&&(d.textContent=`IPID: ${Number(a.ipId).toString(16)}`),""!==a.roomId&&(m.textContent=`Room Id: ${a.roomId}`),WebXPanel.default.addEventListener(WebXPanel.WebXPanelEvents.CONNECT_WS,(e=>{r("app.webxpanel.status.CONNECT_WS")})),WebXPanel.default.addEventListener(WebXPanel.WebXPanelEvents.DISCONNECT_CIP,(e=>{r("app.webxpanel.status.DISCONNECT_CIP"),s()})),WebXPanel.default.addEventListener(WebXPanel.WebXPanelEvents.ERROR_WS,(e=>{r("app.webxpanel.status.ERROR_WS"),s()})),WebXPanel.default.addEventListener(WebXPanel.WebXPanelEvents.AUTHENTICATION_FAILED,(e=>{r("app.webxpanel.status.AUTHENTICATION_FAILED"),s()})),WebXPanel.default.addEventListener(WebXPanel.WebXPanelEvents.AUTHENTICATION_REQUIRED,(e=>{r("app.webxpanel.status.AUTHENTICATION_REQUIRED"),s()})),WebXPanel.default.addEventListener(WebXPanel.WebXPanelEvents.FETCH_TOKEN_FAILED,(e=>{if(e.detail&&e.status){let t=translateModule.translateInstant("app.webxpanel.statusmessageprefix");const n=document.querySelector("#webxpanel-tab-content .connection .status");null!==n&&(n.innerHTML=t+e.detail.status+" "+e.detail.statusText)}else r("app.webxpanel.status.FETCH_TOKEN_FAILED");s()})),WebXPanel.default.addEventListener(WebXPanel.WebXPanelEvents.CONNECT_CIP,(e=>{i(t.success),function(){let e=document.getElementById("infobtn");e&&e.classList.remove("warn")}(),setTimeout((()=>{i(t.hide)}),1e4),r("app.webxpanel.status.CONNECT_CIP");const n=document.querySelector("#webxpanel-tab-content .connection .cs"),l=document.querySelector("#webxpanel-tab-content .connection .ipid"),s=document.querySelector("#webxpanel-tab-content .connection .roomid");n.textContent=`CS: wss://${a.host}:${a.port}`,l.textContent=`IPID: ${o.ipId}`,""!==e.detail.roomId&&(s.textContent=`Room Id: ${e.detail.roomId}`)})),WebXPanel.default.addEventListener(WebXPanel.WebXPanelEvents.NOT_AUTHORIZED,(({detail:e})=>{const t=e.redirectTo;r("app.webxpanel.status.NOT_AUTHORIZED"),setTimeout((()=>{console.log("redirecting to "+t),window.location.replace(t)}),3e3)}))}return{connect:function(e){"undefined"!=typeof WebXPanel&&WebXPanel.isActive&&c(e)},getWebXPanel:function(e){const t=WebXPanel.getWebXPanel(e);WebXPanel={...t,default:t.WebXPanel}},paramsToObject:l}}();const templatePageModule=(()=>{"use strict";let e=null,t=null,n={name:""},o=0,a=0,i=!1,l=2e3,r=!1;const s=["animate__animated","animate__fadeIn"];function c(t){if(t!==n.pageName){const o=projectConfigModule.getNavigationPages().find((e=>e.pageName===t)),a=JSON.parse(JSON.stringify(n));if(!0===a.preloadPage&&!1===a.cachePage){const e=document.getElementById(a.pageName+"-import-page");e.removeAttribute("url"),e.setAttribute("receiveStateShow",a.pageName+"-import-page-show"),e.setAttribute("noShowType","remove")}else if(!1===a.preloadPage&&!0===a.cachePage){const e=document.getElementById(a.pageName+"-import-page");e.removeAttribute("receiveStateShow"),!1!==e.hasAttribute("url")&&e.getAttribute("url")&&""!==e.getAttribute("url")||e.setAttribute("url",a.fullPath+a.fileName),e.setAttribute("noShowType","display")}if(CrComLib.publishEvent("b","active_state_class_"+a.pageName,!1),n=JSON.parse(JSON.stringify(o)),CrComLib.publishEvent("b","active_state_class_"+n.pageName,!0),null!==e){const n=projectConfigModule.getNavigationPages().findIndex((e=>e.pageName===t));try{if("horizontal"===projectConfigModule.getMenuOrientation()||"vertical"===projectConfigModule.getMenuOrientation()){const e=new IntersectionObserver(((t,o)=>{t.forEach((e=>{!1===e.isIntersecting&&CrComLib.publishEvent("n","scrollToMenu",n)})),e.unobserve(document.getElementById("menu-list-id-"+n))}),{rootMargin:"0px",threshold:1});e.observe(document.getElementById("menu-list-id-"+n))}e.setActiveView(n)}catch(e){console.error(e)}}navigationModule.goToPage(t)}}function u(e){const t=projectConfigModule.getNavigationPages();t.length>0&&e>=0&&e<=t.length&&c(t[e].pageName)}document.body.addEventListener("click",(function(n){if(e=document.querySelector(".triggerview"),t=document.getElementById("horizontal-menu-swiper-thumb"),"sidebarToggle"===n.target.id)n.stopPropagation();else{let e=document.querySelector(".swiper-thumb");e&&e.classList.remove("open"),t&&t.classList.remove("open");let n=document.getElementById("sidebarToggle");n&&n.classList.remove("active")}}));let d=CrComLib.subscribeState("o","ch5-import-htmlsnippet:template-page-import-page",(i=>{i.loaded&&(e=document.querySelector(".triggerview"),t=document.getElementById("horizontal-menu-swiper-thumb"),projectConfigModule.projectConfigData().then((t=>{translateModule.initializeDefaultLanguage().then((()=>{templateSetThemeModule.setThemes(t.themes),templateSetThemeModule.changeTheme(t.selectedTheme),serviceModule.initialize(t);const i="?v="+(new Date).getTime();document.getElementById("favicon").setAttribute("href",t.faviconPath);const r=t.themes.find((e=>e.name===t.selectedTheme));r&&document.getElementById("shellTemplateSelectedThemeCss").setAttribute("href","./assets/css/"+r.extends+".css"+i);const s=document.getElementById("widgets-and-standalone-pages"),c=t.content.widgets;for(let e=0;e<c.length;e++){const t=document.createElement("ch5-import-htmlsnippet");t.setAttribute("id",c[e].widgetName+"-import-widget"),t.setAttribute("url",c[e].fullPath+c[e].fileName),t.setAttribute("show","false"),s.appendChild(t)}const d=projectConfigModule.getAllStandAloneViewPages();for(let e=0;e<d.length;e++){const t=document.createElement("ch5-import-htmlsnippet");t.setAttribute("id",d[e].pageName+"-import-page"),t.setAttribute("url",d[e].fullPath+d[e].fileName),t.setAttribute("show","false"),s.appendChild(t)}if(!0===t.header.display){let e="";e=t.header.$component&&""!==t.header.$component?document.getElementById("header-section-page-template2").innerHTML:document.getElementById("header-section-page-template1").innerHTML;const n=document.getElementById("header-section-page"),o=utilsModule.mergeJSON(t,{customHeaderUrl:projectConfigModule.getCustomHeaderUrl()});n.innerHTML=utilsModule.replacePlaceHolders(e,o);let a=document.getElementById("sidebarToggle");"vertical"===t.menuOrientation?a&&a.classList.remove("display-none"):a&&(a.classList.contains("display-none")||a.classList.add("display-none")),""===t.header.$component&&(document.getElementById("header-section-page-set1").innerHTML=utilsModule.replacePlaceHolders(document.getElementById("header-section-page-template1-set1").innerHTML,o))}else document.getElementById("header-index-page").remove();const g=document.getElementById("content-index-page");let f="";f="horizontal"===t.menuOrientation?document.getElementById("template-content-page-section-horizontal").innerHTML:"vertical"===t.menuOrientation?document.getElementById("template-content-page-section-vertical").innerHTML:document.getElementById("template-content-page-section-none").innerHTML;const h=utilsModule.mergeJSON(t,{});g.innerHTML+=utilsModule.replacePlaceHolders(f,h);const C=projectConfigModule.getNavigationPages();C.forEach((e=>{e.preloadPage&&o++})),"horizontal"===t.menuOrientation?document.getElementById("horizontal-menu-swiper-thumb")?.setAttribute("size",C.length):"vertical"===t.menuOrientation&&document.getElementById("vertical-menu-swiper-thumb")?.setAttribute("size",C.length);let v="";if(v="horizontal"===t.menuOrientation?document.getElementById("triggerviewInContentHorizontal"):"vertical"===t.menuOrientation?document.getElementById("triggerviewInContentVertical"):document.getElementById("triggerviewInContentNone"),v){const n=t.content.triggerViewProperties;n&&Object.entries(n).forEach((([e,t])=>{v.setAttribute(e,t)}));for(let e=0;e<C.length;e++){const n=document.createElement("ch5-triggerview-child"),o=t.content.pages[e].triggerViewChildProperties;o&&Object.entries(o).forEach((([e,t])=>{n.setAttribute(e,t)}));const i=document.createElement("ch5-import-htmlsnippet");i.setAttribute("id",C[e].pageName+"-import-page"),CrComLib.isCrestronTouchscreen()&&(l=15e3),!0===C[e].preloadPage?(setTimeout((()=>{i.setAttribute("url",C[e].fullPath+C[e].fileName),a++}),l),i.setAttribute("noShowType","display")):(i.setAttribute("receiveStateShow",C[e].pageName+"-import-page-show"),!0===C[e].cachePage?i.setAttribute("noShowType","display"):i.setAttribute("noShowType","remove")),n.appendChild(i),v.appendChild(n)}v.setAttribute("activeview",projectConfigModule.defaultActiveViewIndex()),e=v}if(!0===t.footer.display){const e=document.getElementById("footer-section-page");let n="";n=t.footer.$component&&""!==t.footer.$component?document.getElementById("footer-section-page-template2").innerHTML:document.getElementById("footer-section-page-template1").innerHTML;const o=utilsModule.mergeJSON(t,{copyrightYear:(new Date).getFullYear(),customFooterUrl:projectConfigModule.getCustomFooterUrl()});e.innerHTML=utilsModule.replacePlaceHolders(n,o)}else document.getElementById("footer-index-page").remove();e&&e.addEventListener("select",(e=>{const t=projectConfigModule.getNavigationPages();t.length>0&&void 0!==e.detail&&t[e.detail].pageName!==n.pageName&&u(e.detail)})),CrComLib.subscribeState("s","Csig.Product_Name_Text_Join_fb",(e=>{hardButtonsModule.initialize(e).then((()=>{let e=projectConfigModule.getNavigationPages();if("horizontal"===t.menuOrientation){let n=CrComLib.subscribeState("o","ch5-list",(o=>{o.loaded&&"horizontal-menu-swiper-thumb"===o.id&&(p(t,e),m(t),b(t,e),setTimeout((()=>{CrComLib.unsubscribeState("o","ch5-list",n),n=null})))}))}else if("vertical"===t.menuOrientation){let n=CrComLib.subscribeState("o","ch5-list",(o=>{o.loaded&&"vertical-menu-swiper-thumb"===o.id&&(p(t,e),m(t),b(t,e),setTimeout((()=>{CrComLib.unsubscribeState("o","ch5-list",n),n=null})))}))}else m(t),b(t,e)}))}))}))})),setTimeout((()=>{CrComLib.unsubscribeState("o","ch5-import-htmlsnippet:template-page-import-page",d),d=null})))}));function m(e){const t=webXPanelModule.paramsToObject();let n=e.forceDeviceXPanel;"true"===t.forcedevicexpanel?n=!0:"false"===t.forcedevicexpanel&&(n=!1),!0===n?(webXPanelModule.getWebXPanel(!0),g(e)):!0===WebXPanel.runsInContainerApp()?(webXPanelModule.getWebXPanel(!1),g(e)):!0===e.useWebXPanel&&(webXPanelModule.getWebXPanel(!0),g(e))}function g(e){if(!r){let t=CrComLib.subscribeState("o","ch5-import-htmlsnippet:template-version-info-import-page",(n=>{n.loaded&&(webXPanelModule.connect(e),r=!0,setTimeout((()=>{CrComLib.unsubscribeState("o","ch5-import-htmlsnippet:template-version-info-import-page",t),t=null})))}))}}function p(e,t){for(let n=0;n<t.length;n++){const o=document.getElementById("menu-list-id-"+n);o&&(t[n].navigation.iconUrl&&""!==t[n].navigation.iconUrl?o.setAttribute("iconUrl",t[n].navigation.iconUrl):t[n].navigation.iconClass&&""!==t[n].navigation.iconClass&&o.setAttribute("iconClass",t[n].navigation.iconClass),!0===t[n].navigation.isI18nLabel?o.setAttribute("label",translateModule.translateInstant(t[n].navigation.label)):o.setAttribute("label",t[n].navigation.label),o.setAttribute("iconClass",t[n].navigation.iconClass),"horizontal"===e.menuOrientation&&o.setAttribute("iconPosition",t[n].navigation.iconPosition),o.setAttribute("receiveStateSelected","active_state_class_"+t[n].pageName),o.setAttribute("onRelease","templatePageModule.navigateTriggerViewByPageName('"+t[n].pageName+"')"))}}function b(e,t){let n=-99;if(e.content.$defaultView&&""!==e.content.$defaultView)for(let o=0;o<t.length;o++){if(t[o].pageName.toString().trim().toUpperCase()===e.content.$defaultView.toString().trim().toUpperCase()){n=o;break}n=-1}else n=0;-99!==n&&-1!==n||(n=0),u(n)}return window.addEventListener("orientationchange",(function(){try{templatePageModule.setMenuActive()}catch(e){}}),!1),{navigateTriggerViewByPageName:c,openThumbNav:function(){document.getElementById("horizontal-menu-swiper-thumb").className+=" open",event.stopPropagation()},toggleSidebar:function(){let e=document.getElementById("sidebarToggle");e&&e.classList.toggle("active");let t=document.querySelector(".swiper-thumb");t&&t.classList.toggle("open")},hideLoading:function e(t){o===a?(i||0===o||(i=!0,projectConfigModule.getNavigationPages().forEach((e=>e.preloadPage&&navigationModule.updateDiagnosticsOnPageChange(e.pageName)))),document.getElementById("header-section-page-template1")?.remove(),document.getElementById("header-section-page-template2")?.remove(),document.getElementById("template-content-page-section-horizontal")?.remove(),document.getElementById("template-content-page-section-vertical")?.remove(),document.getElementById("template-content-page-section-none")?.remove(),document.getElementById("footer-section-page-template1")?.remove(),document.getElementById("footer-section-page-template2")?.remove(),document.getElementById("header-section-page-template1-set1")?.remove(),projectConfigModule.projectConfigData().then((e=>{!1===e.header.displayInfo&&document.getElementById("infobtn")?.remove(),!1===e.header.displayTheme&&document.getElementById("themebtn")?.remove(),"vertical"!==e.menuOrientation&&"none"!==e.menuOrientation||document.getElementById("template-content-index-footer")?.remove()})),setTimeout((()=>{document.getElementById("loader").style.display="none"}),2e3)):setTimeout((()=>{e(t)}),500)},navigateTriggerViewByIndex:u,setTransition:function(e){const t=s;for(let n=0;n<t.length;n++)e.classList.add(t[n])}}})(),templateAppLoaderModule=(()=>{"use strict";function e(e){return!!document.getElementById(e)&&document.getElementById(e).hasAttribute("url")&&null!==document.getElementById(e).getAttribute("url")&&void 0!==document.getElementById(e).getAttribute("url")&&""!==document.getElementById(e).getAttribute("url")}return{showLoading:function(t){const n=t.pageName+"-import-page";!1===e(n)&&CrComLib.publishEvent("b",n+"-show-app-loader",!0)},isCachePageLoaded:e}})(),templateRemoteLoggerSettingsModule=(()=>{"use strict";let e,t=!1,n={},o=0,a=0,i=null,l=null,r=null,s=null,c=null,u=null;function d(){i.innerHTML=translateModule.translateInstant("app.ch5logger.docker.dockerdisconnected"),l[0].firstChild.classList.remove("red"),l[0].firstChild.classList.remove("amber"),l[0].firstChild.classList.remove("green")}function m(){document.querySelector(".ui.error.message").style.display="none",d(),void 0!==e&&e.disconnect(),g()}function g(){r.disabled=!1,r.className="connect",c.disabled=!1,u.disabled=!1,void 0!==e&&e.disconnect(),r.innerHTML=translateModule.translateInstant("app.ch5logger.form.connect")}function p(o,a){try{c.disabled=!0,u.disabled=!0,r.disabled=!0,t?(n.resetIP(o,a),e=CrComLib.getLogger(n,!0)):(n=CrComLib.getRemoteAppender(o,a),e=CrComLib.getLogger(n,!0),t=!0,e.subscribeDockerStatus.subscribe((e=>{""!==e&&(d(),"DOCKER_CONNECTING"===e?(r.innerHTML=translateModule.translateInstant("app.ch5logger.form.connecting"),l[0].firstChild.classList.add("amber")):"DOCKER_CONNECTED"===e?(r.disabled=!1,c.disabled=!0,u.disabled=!0,r.className="disconnect",r.innerHTML=translateModule.translateInstant("app.ch5logger.form.disconnect"),l[0].firstChild.classList.add("green")):"DOCKER_ERROR"===e&&(g(),l[0].firstChild.classList.add("red")),e=(e=e.toLowerCase()).replace(/_/,""),i.innerHTML=translateModule.translateInstant("app.ch5logger.docker."+e))})))}catch(e){c.disabled=!1,u.disabled=!1,r.disabled=!1,utilsModule.log(e)}}function b(){o=0,a=0}function f(){const e=Date.now();return Math.floor((e-a)/1e3)}function h(){const e=c.value,t=u.value;r.classList.contains("connect")?p(e,t):m()}let C=CrComLib.subscribeState("o","ch5-import-htmlsnippet:template-remote-logger-settings-import-page",(e=>{e.loaded&&(setTimeout((()=>{i=document.getElementById("template-dstatus"),l=document.getElementsByClassName("dockerstatus"),r=document.getElementById("template-rlbtn"),s=document.querySelector(".ui.error.message"),c=document.getElementById("loggerIpAddress"),u=document.getElementById("loggerPortNumber")}),5e3),setTimeout((()=>{CrComLib.unsubscribeState("o","ch5-import-htmlsnippet:template-remote-logger-settings-import-page",C),C=null})))}));return{showLoggerPopUp:function(){const e=document.getElementById("loggerModalWrapper");document.querySelector(".ui.error.message").style.display="none",a&&f()>3&&b(),o+=1,1==o&&(a=Date.now()),5===o&&(f()<=3?(CrComLib.publishEvent("b","template-remote-logger.clicked",!0),e.style.display="block",b()):(CrComLib.publishEvent("b","template-remote-logger.clicked",!1),e.style.display="none",b()))},validate:function(){s.style.display="none";let e=!1,t=!1;return s.innerHTML="",""===c.value||void 0===c.value||null===c.value?(s.innerHTML="Please enter IP Address/Hostname",s.style.display="block",!1):""===u.value||void 0===u.value||null===u.value?(s.innerHTML="Please enter Port Number",s.style.display="block",!1):void 0!==c.value&&null!==c.value&&"0.0.0.0"!==c.value&&"255.255.255.255"!==c.value&&c.value.length<=127&&(/^(\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.(\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.(\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.(\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))$/.test(c.value)||/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9-]*[A-Za-z0-9])$/.test(c.value))?(e=!0,s.style.display="none",null!==u.value&&!isNaN(u.value)&&u.value>=1025&&u.value<65536?(t=!0,s.style.display="none",void(e&&t&&(s.style.display="none",h()))):(s.innerHTML="Please enter valid Port Number between 1025 to 65536",s.style.display="block",!1)):(s.innerHTML="Please enter valid IP Address/Hostname",s.style.display="block",!1)},resetConnection:m,updateLoggerInfo:h,setRemoteLoggerConfig:p}})(),templateSetThemeModule=(()=>{"use strict";let e=[];function t(t){setTimeout((()=>{const n=document.body;for(let t=0;t<e.length;t++)n.classList.remove(e[t].name);let o=t.trim();n.classList.add(o);let a=e.find((e=>e.name.trim().toLowerCase()===o.toLowerCase()));const i="?v="+(new Date).getTime();if(document.getElementById("shellTemplateSelectedThemeCss").setAttribute("href","./assets/css/"+a.extends+".css"+i),document.getElementById("brandLogo")&&"undefined"!==a.brandLogo)for(var l in a.brandLogo)""!==a.brandLogo[l]&&document.getElementById("brandLogo").setAttribute(l,a.brandLogo[l]);const r=document.getElementById("template-content-background");if(r&&"undefined"!==a.backgroundProperties)for(let e in a.backgroundProperties)"url"===e?"object"==typeof a.backgroundProperties.url&&(a.backgroundProperties.url=a.backgroundProperties.url.join(" | ")):"backgroundColor"===e&&"object"==typeof a.backgroundProperties.backgroundColor&&(a.backgroundProperties.backgroundColor=a.backgroundProperties.backgroundColor.join(" | ")),""!==a.backgroundProperties[e]&&r.setAttribute(e,a.backgroundProperties[e]);const s=e.findIndex((e=>e.name===t));CrComLib.publishEvent("n","selectedTheme",s)}),500)}let n=CrComLib.subscribeState("o","ch5-import-htmlsnippet:template-set-theme-import-page",(e=>{e.loaded&&(projectConfigModule.projectConfigData().then((e=>{translateModule.initializeDefaultLanguage().then((()=>{const n=e.customSignals.receiveStateTheme||"template-theme",o=e.customSignals.sendEventTheme||"template-theme",a=e.themes,i=document.getElementById("template-theme-list");let l=`<ch5-button-list orientation="vertical" buttonType="warning" numberOfItems="${a.length}" columns="1" \n        buttonShape="rounded-rectangle" indexId="idx" loadItems="all"\n        receiveStateSelectedButton="selectedTheme">`;a.forEach((e=>{l+=`<ch5-button-list-individual-button \n            onRelease="CrComLib.publishEvent('s','${n}','${e.name}')" \n            labelInnerHtml="${e.name}" >\n          </ch5-button-list-individual-button>`})),l+="</ch5-button-list>",i.innerHTML=l,CrComLib.subscribeState("b","themebtn.clicked",(e=>{!0===e.repeatdigital&&"false"===document.getElementById("template-theme").getAttribute("show")&&document.getElementById("template-theme").setAttribute("show","true")})),CrComLib.subscribeState("s",n,(i=>{const l=!1===document.body.classList.contains(i)&&!!a.find((e=>e.name===i)),r=""===i&&!1===document.body.classList.contains(e.selectedTheme);if(l||r){setTimeout((()=>{document.getElementById("template-theme").setAttribute("show","false")}),50);const a=!0===l?i:e.selectedTheme;t(a),n!==o&&o?.trim()&&CrComLib.publishEvent("s",o,a)}}))}))})),setTimeout((()=>{CrComLib.unsubscribeState("o","ch5-import-htmlsnippet:template-set-theme-import-page",n),n=null})))}));return{setThemes:function(t){e=t},changeTheme:t}})(),templateVersionInfoModule=(()=>{"use strict";let e;const t={},n={};let o;function a(e){const t=document.createElement("tr");for(const n of Object.values(e)){const e=document.createElement("td");"Y"===n?(e.style.color="green",e.innerHTML='<i class="fas fa-check"></i>&nbsp;&nbsp;Yes'):"N"===n?(e.innerHTML='<i class="fas fa-times"></i>&nbsp;&nbsp;No',e.style.color="orange"):e.textContent=n,t.appendChild(e)}return t}function i(){const e=document.getElementById("diagnosticsTableElement");e.innerHTML="";const o=document.getElementById("diagnosticPageHeaderElement"),i=projectConfigModule.getNavigationPages();document.getElementById("pageCount").textContent=r("pagecount",i.length),o.children[2].textContent=`Preload (${i.filter((e=>e.preloadPage)).length})`,o.children[3].textContent=`\tCached (${i.filter((e=>e.cachePage)).length})`;for(const n of i){let o=t[n.pageName]?.total??"",i=t[n.pageName]?.domNodes??"";const l=document.getElementById(n.pageName+"-import-page");l&&(t[n.pageName]=CrComLib.countNumberOfCh5Components(l),t[n.pageName].domNodes=l.getElementsByTagName("*").length,1===t[n.pageName].domNodes&&(t[n.pageName].total="",t[n.pageName].domNodes=""),o=t[n.pageName].total,i=t[n.pageName].domNodes);const r=a({name:n.navigation.isI18nLabel?translateModule.translateInstant(n.navigation.label):n.navigation.label,count:o,preload:n.preloadPage?"Y":"N",cached:n.cachePage?"Y":"N",nodes:i});r.setAttribute("id","diagnostics-table-"+n.pageName),e.appendChild(r)}document.getElementById("totalDom").innerHTML=templateVersionInfoModule.translateModuleHelper("totalnodes",n.totalDomCount),document.getElementById("totalComponents").innerHTML=templateVersionInfoModule.translateModuleHelper("totalcomponents",n.totalComponentsCount),document.getElementById("currentComponents").innerHTML=templateVersionInfoModule.translateModuleHelper("currentcomp",n.currentCh5Components)}function l(e,o){const a=s(),i={ch5ComponentsPageWise:{...t},...n,totalCh5ComponentsCurrentlyLoaded:CrComLib.countNumberOfCh5Components(document.getElementsByTagName("body")[0]).total},l=document.getElementById("totalSignals").textContent.split(":")[1].trim(),r=document.getElementById("totalSubscribers").textContent.split(":")[1].trim();(void 0!==o&&!0===o||void 0===o)&&console.log({signals:a,ch5components:i,signalNames:l,subscriptions:r})}function r(e,t){return translateModule.translateInstant(`header.info.diagnostics.${e}`)+" "+t}function s(){let e=0,t=0,n=[];const o=CrComLib.getSubscriptionsCount();for(const[a,i]of Object.entries(o))for(const[o,l]of Object.entries(i)){e++;const i=null!=a?a:"",r=null!=o?o:"",s=Object.values(l._subscriptions).length-1;n.push({signalType:i,signalName:r,subscriptions:s}),t+=s}const a=document.getElementById("totalSignals"),i=document.getElementById("totalSubscribers");return a.textContent=r("subscribers",t),i.textContent=r("subscription",e),n}let c=CrComLib.subscribeState("o","ch5-import-htmlsnippet:template-version-info-import-page",(t=>{t.loaded&&(setTimeout((()=>{projectConfigModule.projectConfigData().then((t=>{translateModule.initializeDefaultLanguage().then((()=>{e=t,function(e){let t=0;"none"!==e&&("hourly"===e?t=36e5:"daily"===e?t=864e5:"weekly"===e&&(t=6048e5),o||(o=setInterval(templateVersionInfoModule.logSubscriptionsCount,t)))}(t.header.diagnostics.logs.logDiagnostics),s(),function(){const t=webXPanelModule.paramsToObject();let n=e.forceDeviceXPanel;"true"===t.forcedevicexpanel?n=!0:"false"===t.forcedevicexpanel&&(n=!1),!1===e.useWebXPanel&&!1===n&&(document.getElementById("webxpanel-tab").style.display="none"),serviceModule.loadJSON("./assets/data/version.json",(e=>{if(!e)return utilsModule.log("FILE NOT FOUND");const t=document.getElementById("versionTableBody");t.innerHTML="",Array.from(JSON.parse(e)).forEach((e=>t.appendChild(a(e))))})),i(),function(){const e=["version-tab","webxpanel-tab","diagnostics-tab"];e.forEach((t=>{document.getElementById(t).addEventListener("click",(function(){this.classList.contains("selected")||(e.forEach((e=>document.getElementById(e+"-content").style.display=t!==e?"none":"block")),e.forEach((e=>t!==e?document.getElementById(e).classList.remove("selected"):"")),this.classList.add("selected"))}))}))}(),subscribeLogButton.addEventListener("click",l),CrComLib.subscribeState("b",""+e.header.diagnostics.logs.receiveStateLogDiagnostics,(e=>l(0,e)))}(),document.getElementById("template-info").setAttribute("title",translateModule.translateInstant("header.info.title"))}))})),CrComLib.subscribeState("b","infoBtn.clicked",(e=>{!0===e.repeatdigital&&"false"===document.getElementById("template-info").getAttribute("show")&&(document.getElementById("template-info").setAttribute("show","true"),i())}))})),setTimeout((()=>{CrComLib.unsubscribeState("o","ch5-import-htmlsnippet:template-version-info-import-page",c),c=null})))}));return{translateModuleHelper:r,updateSubscriptions:s,tableCount:t,componentCount:n,logSubscriptionsCount:l}})();